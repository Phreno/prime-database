#!/bin/bash
# ..............
# [K3rn€l_P4n1k]
# ..............

# =====
# SETUP
# =====
#
# Installe la base de données des nombres premiers.
# L'installation suit les étapes suivantes:
# - Téléchargement des zip contenant les nombres premiers
# - Extraction des fichiers puis renommage
# - Sauvegarde du répertoire ( permet le traitement du setup offline )

primeDB_SETUP_SH="${BASH_SOURCE[0]:-$(realpath ${0})}"
primeDB_SETUP_SH_DIR="$( dirname ${primeDB_SETUP_SH} )"

#
# Gestion des erreurs
#
source "${primeDB_SETUP_SH_DIR}/../lib/error.profile"

#
# Import des dépendances
#
source "${primeDB_SETUP_SH_DIR}/../lib/base.profile"
source "${primeDB_SETUP_SH_DIR}/../lib/core.profile"
source "${primeDB_SETUP_SH_DIR}/../lib/setup.profile"

#
# Téléchargement des données à installer
#
primeDB_download(){
  echo ">> INFO download primeDB data"
  primeDB_setup_removeData
  primeDB_setup_downloadPrimes
  primeDB_setup_cleanFolder
  echo ">> INFO download done"
}

primeDB_extract(){
  echo ">> INFO extract files"
  primeDB_setup_unzipPrimes
  primeDB_setup_removeZipFiles
  primeDB_setup_normalizeDatafileName
  echo ">> INFO extract done"
}

# primeDB_download
# primeDB_extract
# primeDB_setup_backupData
primeDB_setup_createDB
